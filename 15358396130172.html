<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>  
	  
  	Toolbar - 木子才的博客
  	
	</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="木子才的博客" type="application/atom+xml">

	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>

	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>
	
	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}
	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	.share-comment{ padding: 25px 0px; clear: both;}
	hr{ margin: 20px 0px;border: 0; border-top:solid 1px #ddd;}
	</style>
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
				 
				 	<div class="profilepic">
						<img src="muzicoLogo.jpg" style="width:160px;">
					</div>
            	
					
					<h1><a href="index.html">木子才的博客</a></h1>
					<p class="subtitle">木子才菜鸟的空间~</p>
					<nav id="main-nav">
						<ul class="main">
						
						  <li id=""><a target="_self" href="index.html">首页</a></li>
						
						  <li id=""><a target="_self" href="archives.html">全部文章</a></li>
						
						  <li id=""><a target="_self" href="flexBox.html">flexBox</a></li>
						
						  <li id=""><a target="_self" href="flutter.html">flutter</a></li>
						
						  <li id=""><a target="_self" href="iOS.html">iOS</a></li>
						
						  <li id=""><a target="_self" href="React Native.html">React Native</a></li>
						
						  <li id=""><a target="_self" href="Vue.html">Vue</a></li>
						
						  <li id=""><a target="_self" href="Python.html">Python</a></li>
						
						  <li id=""><a target="_self" href="Unity.html">Unity</a></li>
						
						  <li id=""><a target="_self" href="nodejs.html">nodejs</a></li>
						
						  <li id=""><a target="_self" href="Qt.html">Qt</a></li>
						
						  <li id=""><a target="_self" href="Xamarin.html">Xamarin</a></li>
						
						  <li id=""><a target="_self" href="友情链接.html">友情链接</a></li>
						
						  <li id=""><a target="_self" href="iOS组件.html">iOS 组件</a></li>
						
						  <li id=""><a target="_self" href="微信小程序.html">微信小程序</a></li>
						
						  <li id=""><a target="_self" href="Swift.html">Swift</a></li>
						
						  <li id=""><a target="_self" href="PHP.html">PHP</a></li>
						
						  <li id=""><a target="_self" href="作品展示.html">作品展示</a></li>
						
						  <li id=""><a target="_self" href="简单语法转OC文件.html">简单语法转OC文件</a></li>
						
						  <li id=""><a target="_self" href="其他.html">其他</a></li>
						
						  <li id=""><a target="_self" href="无题.html">无题</a></li>
						
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">










<a target="_blank" class="github" target="_blank" href="https://github.com/yococoxc" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:547153062@qq.com" title="Email">Email</a>

								

								<a class="rss" href="atom.xml" title="RSS">RSS</a>
							
						</div>
					</nav>
				</header>				
			</div>
		</div>	
		<div class="mid-col">
			<div class="mid-col-container"> <div id="content" class="inner">

	<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
		<h1 class="title" itemprop="name">Toolbar</h1>
		<div class="entry-content" itemprop="articleBody">
			<p><img src="media/15358396130172/82C4B3C8-9A64-446D-A36F-F58B1CA648CE.png" alt="82C4B3C8-9A64-446D-A36F-F58B1CA648CE"/></p>

<p><img src="media/15358396130172/A8951D88-3AB1-4C60-9969-3A13BC8720ED.png" alt="A8951D88-3AB1-4C60-9969-3A13BC8720ED"/></p>

<h3 id="toc_0">编写代码，看效果</h3>

<p>继续上次的项目（LearnAndroid02）：</p>

<p>修改 fragment_home.xml 文件：</p>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    tools:context=&quot;.fragment.HomeFragment&quot;&gt;

    &lt;android.support.v7.widget.Toolbar
        android:id=&quot;@+id/toolbar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:minHeight=&quot;?attr/actionBarSize&quot;
        android:background=&quot;?attr/colorPrimary&quot;
        app:title=&quot;title&quot;&gt;

    &lt;/android.support.v7.widget.Toolbar&gt;

&lt;/FrameLayout&gt;
</code></pre>

<p>修改res/values/styles.xml</p>

<p><img src="media/15358396130172/15358407771984.jpg" alt=""/></p>

<p><img src="media/15358396130172/15358408765317.jpg" alt=""/></p>

<p><img src="media/15358396130172/15358409072095.jpg" alt=""/></p>

<p><img src="media/15358396130172/15358409417057.jpg" alt=""/></p>

<p>添加 返回按钮：</p>

<p>fragnment_home.xml:</p>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    tools:context=&quot;.fragment.HomeFragment&quot;&gt;

    &lt;android.support.v7.widget.Toolbar
        android:id=&quot;@+id/toolbar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:minHeight=&quot;?attr/actionBarSize&quot;
        android:background=&quot;?attr/colorPrimary&quot;
        app:title=&quot;title&quot;
        app:navigationIcon=&quot;@drawable/icon_back_32px&quot;&gt;

    &lt;/android.support.v7.widget.Toolbar&gt;

&lt;/FrameLayout&gt;
</code></pre>

<p>HomeFragment.java:</p>

<pre><code>public class HomeFragment extends Fragment {

    private Toolbar mToolbar;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.fragment_home, container, false);
    }


    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        mToolbar = getActivity().findViewById(R.id.toolbar);
        mToolbar.setNavigationOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(getContext(), &quot;Navigation Clicked&quot;, Toast.LENGTH_LONG).show();
            }
        });
    }
}
</code></pre>

<p><img src="media/15358396130172/F549D3C4-53BC-46FC-A77E-35598F72EE0C.png" alt="F549D3C4-53BC-46FC-A77E-35598F72EE0"/></p>

<h3 id="toc_1">与 menu 应用</h3>

<p>在 res 目录下创建 menu 文件夹，然后在该文件夹下创建 menu_main.xml 文件。</p>

<p>menu_main.xml:</p>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;
    &lt;item android:id=&quot;@+id/action_settings&quot; android:title=&quot;@string/action_settings&quot;
        android:orderInCategory=&quot;100&quot;
        app:showAsAction=&quot;never&quot;/&gt;
&lt;/menu&gt;
</code></pre>

<p>添加 HomeFragment.java 的新代码:</p>

<pre><code>@Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        mToolbar = getActivity().findViewById(R.id.toolbar);
        mToolbar.setNavigationOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(getContext(), &quot;Navigation Clicked&quot;, Toast.LENGTH_LONG).show();
            }
        });

        mToolbar.inflateMenu(R.menu.menu_main);
        mToolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem item) {

                int id = item.getItemId();

                if (id == R.id.action_settings) {
                    Toast.makeText(getContext(), &quot;Menu Action Clicked&quot;, Toast.LENGTH_LONG).show();
                }

                return false;
            }
        });
    }
</code></pre>

<p>效果图如下：</p>

<p><img src="media/15358396130172/5FE4CF15-0976-4DA6-AF06-BF10D41A2194.png" alt="5FE4CF15-0976-4DA6-AF06-BF10D41A2194"/></p>

<p>黑色几点就是 menu 的按钮，点击就会看到 menu的内容：</p>

<p><img src="media/15358396130172/CB1A35A5-BCF7-48A0-8CE9-E070AC83131C.png" alt="CB1A35A5-BCF7-48A0-8CE9-E070AC83131"/></p>

<p>已经看到了，menu_main.xml 设置的内容。</p>

<h3 id="toc_2">修改 res/values/styles.xml</h3>

<p><img src="media/15358396130172/1BCF2E11-5BA9-4936-A3BC-AFDCDF2E1D7E.png" alt="1BCF2E11-5BA9-4936-A3BC-AFDCDF2E1D7E"/></p>

<p>styles.xml 代码（在 AppTheme 中指定）：<br/>
```<br/>
<resources></p>

<pre><code>&lt;style name=&quot;OverflowMenuStyle&quot; parent=&quot;@style/Widget.AppCompat.PopupMenu.Overflow&quot;&gt;
    &lt;!-- 是否覆盖锚点，默认为true，即盖住Toolbar --&gt;
    &lt;item name=&quot;overlapAnchor&quot;&gt;false&lt;/item&gt;
    &lt;!-- 弹出层背景颜色 --&gt;
    &lt;item name=&quot;android:popupBackground&quot;&gt;@color/colorPrimary&lt;/item&gt;
    &lt;!-- 弹出层垂直方向上的偏移，即在竖直方向上距离Toolbar的距离，值为负则会盖住Toolbar --&gt;
    &lt;item name=&quot;android:dropDownVerticalOffset&quot;&gt;5dp&lt;/item&gt;
    &lt;!-- 弹出层水平方向上的偏移，即距离屏幕左边的距离，负值会导致右边出现空隙 --&gt;
    &lt;item name=&quot;android:dropDownHorizontalOffset&quot;&gt;0dp&lt;/item&gt;
&lt;/style&gt;

&lt;!-- Base application theme. --&gt;
&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;
    &lt;!-- Customize your theme here. --&gt;
    &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;
    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;
    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;
    &lt;item name=&quot;android:textColorPrimary&quot;&gt;#fff&lt;/item&gt;

    &lt;item name=&quot;android:textColor&quot;&gt;#f89&lt;/item&gt;


    &lt;item name=&quot;actionOverflowMenuStyle&quot;&gt;@style/OverflowMenuStyle&lt;/item&gt;
&lt;/style&gt;
</code></pre>

<p></resources><br/>
```</p>

<p>Toolbar 定义中指定 popupTheme 属性：</p>

<pre><code>&lt;android.support.v7.widget.Toolbar
        android:id=&quot;@+id/toolbar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:minHeight=&quot;?attr/actionBarSize&quot;
        android:background=&quot;?attr/colorPrimary&quot;
        app:title=&quot;title&quot;
        app:navigationIcon=&quot;@drawable/icon_back_32px&quot;
        app:popupTheme=&quot;@style/OverflowMenuStyle&quot;&gt;

    &lt;/android.support.v7.widget.Toolbar&gt;
</code></pre>

<p><img src="media/15358396130172/87DE2AF9-52C8-4EDD-9287-DE3365CF5B3C.png" alt="87DE2AF9-52C8-4EDD-9287-DE3365CF5B3"/></p>

<p>AppTheme 下设置 android:textColorPrimary 可以使 title 颜色改变：</p>

<pre><code>&lt;item name=&quot;android:textColorPrimary&quot;&gt;#aaee00&lt;/item&gt;
</code></pre>

<p><img src="media/15358396130172/7B0768F3-24CF-41B8-8954-1EA09FE78002.png" alt="7B0768F3-24CF-41B8-8954-1EA09FE78002"/></p>

<p>但 同时也设置了 titleTextColor，则会无视 android:textColorPrimary 设置。</p>

<pre><code>&lt;item name=&quot;titleTextColor&quot;&gt;#fff000&lt;/item&gt;
&lt;item name=&quot;android:textColorPrimary&quot;&gt;#aaee00&lt;/item&gt;
</code></pre>

<p><img src="media/15358396130172/B9910EBC-7768-4402-8F3D-8A417588CB2B.png" alt="B9910EBC-7768-4402-8F3D-8A417588CB2B"/></p>

<p>想过怎么弄都无法把上面的三个点变成白色。。。。</p>

<p>直接</p>

<pre><code>&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;
</code></pre>

<p>改成</p>

<pre><code>&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat&quot;&gt;
</code></pre>

<p>就先到这里吧。。。这个的进阶是搞自定义。</p>

		</div>
	</article>
	<div class="share-comment">
	 

	  

	  

	</div>
</div>
        </div>
			<footer id="footer" class="inner">Copyright &copy; 2014
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; 
Theme by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
      </footer>
		</div>
	</div>

  
    
<script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

</body>
</html>